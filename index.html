<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mobile Magazine Flipbook</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/stpageflip/dist/stpageflip.min.css">

<style>
body {
  margin: 0;
  padding: 0;
  background: #088373;
  font-family: Arial, sans-serif;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
}

#intro {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
}

#intro video {
  width: 90vw;
  max-width: 300px;
  border-radius: 12px;
}

#openBtn {
  padding: 12px 22px;
  font-size: 16px;
  border: none;
  background: #f4a166;
  color: white;
  border-radius: 8px;
  cursor: pointer;
}

#flipbookSection {
  display: none;
  width: 95vw;
  max-width: 420px;
  height: 70vh;
  max-height: 500px;
  position: relative;
}

#flipbook {
  width: 100%;
  height: 100%;
}

/* Navigation Buttons */
.navBtn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;
  background: #f4a166;
  color: white;
  font-size: 24px;
  cursor: pointer;
  z-index: 1000;
}
#prevBtn { left: -10px; }
#nextBtn { right: -10px; }
</style>
</head>
<body>

<!-- TEASER -->
<div id="intro">
  <video id="teaser" autoplay loop muted playsinline>
    <source src="TEASER.mp4" type="video/mp4">
  </video>
  <button id="openBtn">OPEN INVITATION</button>
</div>

<!-- FLIPBOOK -->
<div id="flipbookSection">
  <button id="prevBtn" class="navBtn"><i class="fa-solid fa-chevron-left"></i></button>
  <div id="flipbook"></div>
  <button id="nextBtn" class="navBtn"><i class="fa-solid fa-chevron-right"></i></button>
</div>

<!-- AUDIO -->
<audio id="bgAudio" loop>
  <source src="aud/audio.mpeg" type="audio/mpeg">
</audio>

<!-- JS Libraries -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stpageflip/dist/stpageflip.min.js"></script>

<script>
const intro = document.getElementById("intro");
const flipbookSection = document.getElementById("flipbookSection");
const openBtn = document.getElementById("openBtn");
const audio = document.getElementById("bgAudio");
const flipbookContainer = document.getElementById("flipbook");

let pageFlip;

// Function to create pages, supports double-page spread
function createPages() {
  // Cover
  const cover = document.createElement("div");
  cover.className = "page";
  cover.innerHTML = '<img src="1.png">';
  flipbookContainer.appendChild(cover);

  // Double-page spread
  const spread = document.createElement("div");
  spread.className = "page";
  spread.style.display = "flex";

  const left = document.createElement("img");
  left.src = "2.png";
  left.style.width = "50%";
  left.style.height = "100%";
  left.style.objectFit = "cover";

  const right = document.createElement("img");
  right.src = "3.png";
  right.style.width = "50%";
  right.style.height = "100%";
  right.style.objectFit = "cover";

  spread.appendChild(left);
  spread.appendChild(right);
  flipbookContainer.appendChild(spread);

  // Back page
  const back = document.createElement("div");
  back.className = "page";
  back.innerHTML = '<img src="4.png">';
  flipbookContainer.appendChild(back);
}

openBtn.onclick = () => {
  intro.style.display = "none";
  flipbookSection.style.display = "flex";
  audio.play().catch(()=>{});

  createPages();

  // Initialize StPageFlip
  pageFlip = new StPageFlip(flipbookContainer, {
    width: flipbookContainer.offsetWidth,
    height: flipbookContainer.offsetHeight,
    size: "stretch",
    showCover: true,
    mobileScrollSupport: false,
    maxShadowOpacity: 0.5
  });

  pageFlip.render();
};

// Navigation buttons
document.getElementById("prevBtn").onclick = () => {
  if(pageFlip) pageFlip.flipPrev();
};
document.getElementById("nextBtn").onclick = () => {
  if(pageFlip) pageFlip.flipNext();
};

// Responsive
window.addEventListener("resize", ()=>{
  if(pageFlip) pageFlip.update();
});
</script>

</body>
</html>






