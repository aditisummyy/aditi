<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Enhanced Mobile Flipbook</title>

<script src="https://kit.fontawesome.com/b0f29e9bfe.js" crossorigin="anonymous"></script>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  height:100vh;
  background:#0f766e;
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  font-family:sans-serif;
}

/* -------- INTRO -------- */
#intro{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}

#intro video{
  width:90vw;
  max-width:320px;
  border-radius:14px;
}

#openBtn{
  padding:12px 24px;
  font-size:16px;
  border:none;
  background:#f4a166;
  color:white;
  border-radius:10px;
  cursor:pointer;
}

/* -------- FLIPBOOK -------- */
#flipSection{
  display:none;
  align-items:center;
  gap:10px;
}

button{
  background:#f4a166;
  border:none;
  width:50px;
  height:50px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}

i{
  font-size:22px;
  color:white;
}



/* Book */
.book{
  position:relative;
  width:90vw;
  max-width:340px;
  height:72vh;
  max-height:480px;
  transition:transform .6s ease;
}

/* Paper */
.paper{
  position:absolute;
  width:100%;
  height:100%;
  perspective:2000px;
}

.front,.back{
  position:absolute;
  width:100%;
  height:100%;
  background:white;
  transform-origin:left;
  transition:transform .7s cubic-bezier(.4,.0,.2,1);
  box-shadow:0 12px 30px rgba(0,0,0,.35);
}

.front{
  z-index:2;
  backface-visibility:hidden;
}

.back{
  z-index:1;
}

.front-content,.back-content{
  width:100%;
  height:100%;
}

.back-content{
  transform:rotateY(180deg);
}

/* Images */
img{
  width:100%;
  
  height:100%;
  object-fit:cover;
}

/* Flip animation */
.flipped .front,
.flipped .back{
  transform:rotateY(-180deg);
}

/* Stack order */
#p1{z-index:2;}
#p2{z-index:1;}
</style>
</head>

<body>

<!-- INTRO -->
<div id="intro">
  <video autoplay loop muted playsinline>
    <source src="TEASER.mp4" type="video/mp4">
  </video>
  <button id="openBtn">OPEN INVITATION</button>
</div>

<!-- FLIPBOOK -->
<div id="flipSection">

  <button id="prev-btn">
    <i class="fas fa-chevron-left"></i>
  </button>

  <div id="book" class="book">

    <!-- Paper 1 -->
    <div id="p1" class="paper">
      <div class="front">
        <div class="front-content">
          <img src="folder/1.png">
        </div>
      </div>
      <div class="back">
        <div class="back-content">
          <img src="folder/2.png">
        </div>
      </div>
    </div>

    <!-- Paper 2 -->
    <div id="p2" class="paper">
      <div class="front">
        <div class="front-content">
          <img src="folder/3.png">
        </div>
      </div>
      <div class="back">
        <div class="back-content">
          <img src="folder/4.png">
        </div>
      </div>
    </div>

  </div>

  <button id="next-btn">
    <i class="fas fa-chevron-right"></i>
  </button>

</div>

<audio id="bgAudio" loop>
  <source src="aud/audio.mpeg" type="audio/mpeg">
</audio>

<script>
const openBtn=document.getElementById("openBtn");
const intro=document.getElementById("intro");
const flipSection=document.getElementById("flipSection");
const audio=document.getElementById("bgAudio");

const prevBtn=document.getElementById("prev-btn");
const nextBtn=document.getElementById("next-btn");
const book=document.getElementById("book");

const p1=document.getElementById("p1");
const p2=document.getElementById("p2");

let current=1;
const max=4;

/* Open invitation */
openBtn.onclick=()=>{
  intro.style.display="none";
  flipSection.style.display="flex";
  audio.play().catch(()=>{});
};

/* Flip logic */
function openBook(){
  book.style.transform="translateX(50%)";
}

function closeBook(start){
  book.style.transform=start?"translateX(0)":"translateX(100%)";
}

function next(){
  if(current<max){
    if(current===1){openBook();p1.classList.add("flipped");}
    else if(current===2){p2.classList.add("flipped");closeBook(false);}
    current++;
  }
}

function prev(){
  if(current>1){
    if(current===2){closeBook(true);p1.classList.remove("flipped");}
    else if(current===3){openBook();p2.classList.remove("flipped");}
    current--;
  }
}

nextBtn.onclick=next;
prevBtn.onclick=prev;

/* Swipe support (mobile) */
let startX=0;
book.addEventListener("touchstart",e=>startX=e.touches[0].clientX);
book.addEventListener("touchend",e=>{
  let diff=e.changedTouches[0].clientX-startX;
  if(diff<-50) next();
  if(diff>50) prev();
});
</script>
<script>
document.addEventListener("keydown", e => {
  if (e.key === "ArrowRight") next();
  if (e.key === "ArrowLeft") prev();
});
</script>

</body>
</html>

